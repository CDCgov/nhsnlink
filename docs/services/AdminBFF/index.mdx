---

id: AdminBFF
name: Admin Backend-for-Frontend
version: 0.2.0

summary: The administrative backend service that provides functionality for the front-end

owners:
  - arch_tea

specifications:
  openapiPath: openapi.yml

badges:
  - content: ".NET"
    backgroundColor: yellow
    textColor: black
  - content: '8063:8080'
    backgroundColor: gray
    textColor: white

---

## Overview

The AdminBFF (Backend-for-Frontend) service is the administrative gateway that bridges the Angular-based front-end application with the internal service ecosystem. It serves as the single public-facing backend entry point for all administrative operations, providing a tightly controlled interface that enforces security, authorization, and request routing policies.

* **API Gateway for Front-End**: Acts as the dedicated backend interface for the admin UI, simplifying and consolidating access to internal services.
* **Reverse Proxy via YARP**: Uses YARP (Yet Another Reverse Proxy) to intelligently route and proxy requests to internal backend services. This enables seamless service composition, service path rewriting, and centralized traffic control.
* **Authorization Enforcement**: Validates that all incoming requests are made by authenticated users with the proper roles and scopes. It serves as the first and last line of defense before internal services are reached, ensuring that only authorized actions are executed.
* **Facade for Backend Complexity**: Exposes a front-end-optimized API layer, reducing the need for the UI to manage low-level backend details or coordinate multiple service calls directly.
* **Config File Serving for Admin UI**: AdminBFF also serves a runtime configuration file used by the Angular-based Admin UI service. This allows environment-specific values (e.g. API base URLs, feature flags) to be injected at deployment time.

<Admonition type="warning">
  The "Config File Serving for Admin UI" is only applicable when AdminBFF and AdminUI are deployed together as a single instance, such as in containerized deployments or bundled cloud environments.
</Admonition>

## Volumes

| Volume                        | Mount Path                                           | Sub-path                |
|-------------------------------|------------------------------------------------------|-------------------------|
| Azure Storage Account         | `/usr/share/nginx/html/assets/app.config.local.json` | `app.config.local.json` |

## Configuration

An `app.config.local.json` file is used to configure the Admin UI service at deployment time, overriding the defaults in `app.config.json`.

```json
{
  "baseApiUrl": "<ADMIN-BFF-BASE-URL>/api",
  "authRequired": true,
  "oauth2": {
    "enabled": true,
    "issuer": "...",
    "clientId": "...",
    "scope": "openid profile email",
    "responseType": "code"
  }
}
```

This configuration file can be customized at deployment time and mounted in the `/assets` folder, or it can be overridden by ENV variables in a docker deployment.

## Configuration Properties

| **ENV variable**          | **JSON Property**     | **Description**                                                | **Default Value**      | **Required**      |
|---------------------------|-----------------------|----------------------------------------------------------------|------------------------|-------------------|
| LINK_BASE_API_URL         | `baseApiUrl`          | The base URL for the Admin BFF API.                            | `http://localhost`     | Yes               |
| LINK_AUTH_REQUIRED        | `authRequired`        | Indicates whether authentication is required for the Admin UI. | `true`                 | Yes               |
| LINK_OAUTH2_ENABLED       | `oauth2.enabled`      | Indicates whether OAuth2 authentication is enabled.            | `false`                | Yes               |
| LINK_OAUTH2_ISSUER        | `oauth2.issuer`       | The issuer URL for the OAuth2 provider.                        | `null`                 | If oauth2 enabled |
| LINK_OAUTH2_CLIENT_ID     | `oauth2.clientId`     | The client ID for the OAuth2 application.                      | `null`                 | If oauth2 enabled |
| LINK_OAUTH2_SCOPE         | `oauth2.scope`        | The scope for the OAuth2 application.                          | `openid profile email` | If oauth2 enabled |
| LINK_OAUTH2_RESPONSE_TYPE | `oauth2.responseType` | The response type for the OAuth2 application.                  | `code`                 | If oauth2 enabled |