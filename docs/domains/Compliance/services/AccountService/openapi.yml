openapi: 3.0.1
info:
  version: 0.2.0
  title: Account
paths:
  /api/account/info:
    get:
      tags:
      - Account
      responses:
        "200":
          description: OK
  /api/account/user/{id}/activate:
    post:
      tags:
      - User
      summary: Activate a user
      description: Activates a user and makes them active
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/role:
    post:
      tags:
      - Role
      summary: Create user
      description: Creates a new user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkRoleModel'
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkRoleModel'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationFailureResponse'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
    get:
      tags:
      - Role
      summary: Get all roles
      description: Retrieves all roles
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListRoleModel'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user:
    post:
      tags:
      - User
      summary: Create user
      description: Creates a new user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkUserModel'
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkUserModel'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationFailureResponse'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user/{id}/deactivate:
    post:
      tags:
      - User
      summary: Deactivate a user
      description: Deactivates a user and makes them inactive
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/role/{id}:
    delete:
      tags:
      - Role
      summary: Delete role
      description: Deletes an existing role
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
    get:
      tags:
      - Role
      summary: Get role by id
      description: Retrieves information about a role with the id provided
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkRoleModel'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
    put:
      tags:
      - Role
      summary: Update role
      description: Updates an existing role
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkRoleModel'
        required: true
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationFailureResponse'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user/{id}:
    delete:
      tags:
      - User
      summary: Delete user
      description: Deletes an existing user from the system.
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
    get:
      tags:
      - User
      summary: Get user by id
      description: Retrieves information about a user with the id provided
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkUserModel'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationFailureResponse'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
    put:
      tags:
      - User
      summary: Update user
      description: Updates an existing user
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkUserModel'
        required: true
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationFailureResponse'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/claims:
    get:
      tags:
      - Claim
      summary: Get all claims
      description: Retrieves a list all claims that are assignable.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkClaimsModel'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/role/name/{name}:
    get:
      tags:
      - Role
      summary: Get role by name
      description: Retrieves information about a role with the name provided
      parameters:
      - name: name
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkRoleModel'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user/email/{email}:
    get:
      tags:
      - User
      summary: Get user by id
      description: Retrieves information about a user with the email address provided
      parameters:
      - name: email
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkUserModel'
        "400":
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user/facility/{id}:
    get:
      tags:
      - User
      summary: Get facility users
      description: Retrieves users associated with the facility id provided
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupedUserModel'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user/role/{id}:
    get:
      tags:
      - User
      summary: Get users in role
      description: Retrieves users assigned to the role provided
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupedUserModel'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user/{id}/recover:
    post:
      tags:
      - User
      summary: Recover a deleted user
      description: Recovers a deleted user and makes them active
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkUserModel'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/users:
    get:
      tags:
      - User
      summary: Search for users
      description: Searches for users with provided filters
      parameters:
      - name: searchText
        in: query
        schema:
          type: string
      - name: filterFacilityBy
        in: query
        schema:
          type: string
      - name: filterRoleBy
        in: query
        schema:
          type: string
      - name: filterClaimBy
        in: query
        schema:
          type: string
      - name: includeDeactivatedUsers
        in: query
        schema:
          type: boolean
      - name: includeDeletedUsers
        in: query
        schema:
          type: boolean
      - name: sortBy
        in: query
        schema:
          type: string
      - name: sortOrder
        in: query
        schema:
          $ref: '#/components/schemas/SortOrder'
      - name: pageSize
        in: query
        schema:
          type: integer
          format: int32
          default: 10
      - name: pageNumber
        in: query
        schema:
          type: integer
          format: int32
          default: 1
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupedUserModel'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/role/{id}/claims:
    put:
      tags:
      - Role
      summary: Update role claims
      description: Updates the claims for an existing role
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkClaimsModel'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkRoleModel'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationFailureResponse'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/account/user/{id}/claims:
    put:
      tags:
      - User
      summary: Update user claims
      description: Updates the claims for an existing user
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkClaimsModel'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkUserModel'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationFailureResponse'
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
components:
  schemas:
    GroupedUserModel:
      type: object
      properties:
        id:
          type: string
          format: uuid
        username:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        firstName:
          type: string
          nullable: true
        lastName:
          type: string
          nullable: true
        middleName:
          type: string
          nullable: true
        roles:
          type: array
          items:
            type: string
          nullable: true
        isDeleted:
          type: boolean
        isActive:
          type: boolean
      additionalProperties: false
    LinkClaimsModel:
      type: object
      properties:
        claims:
          type: array
          items:
            type: string
          description: A list of claims to assign to the user or role
          nullable: true
          example:
          - CanViewLogs
      additionalProperties: false
    LinkRoleModel:
      type: object
      properties:
        id:
          type: string
          description: The id of the role
          format: uuid
          example: 627c8762-de3c-4c92-a9f5-25483b6e7922
        name:
          type: string
          description: The name of the role
          nullable: true
          example: LinkAdministrator
        description:
          type: string
          description: The description of the role
          nullable: true
          example: Administrator for the Link application
        claims:
          type: array
          items:
            type: string
          description: The claims associated with the role
          nullable: true
          example:
          - CanViewLogs
          - CanViewResources
      additionalProperties: false
    LinkUserModel:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier for the user
          format: uuid
          example: 5d7096b5-aa51-4f29-a840-6df98aaa9356
        firstName:
          type: string
          description: The first name of the user
          nullable: true
          example: John
        middleName:
          type: string
          description: The middle name of the user
          nullable: true
          example: Diddely
        lastName:
          type: string
          description: The last name of the user
          nullable: true
          example: Doe
        username:
          type: string
          description: The username of the user
          nullable: true
          example: john.doe
        email:
          type: string
          description: The email address of the user
          nullable: true
          example: john.doe@gmail.com
        roles:
          type: array
          items:
            type: string
          description: The roles assigned to the user
          nullable: true
          example:
          - Admin
          - User
        userClaims:
          type: array
          items:
            type: string
          description: The claims assigned to the user
          nullable: true
          example:
          - CanViewLogs
        roleClaims:
          type: array
          items:
            type: string
          description: The claims granted by roles assigned to the user
          nullable: true
          example:
          - CanViewLogs
        isDeleted:
          type: boolean
        isActive:
          type: boolean
      additionalProperties: false
    ListRoleModel:
      type: object
      properties:
        id:
          type: string
          description: The id of the role
          format: uuid
          example: 627c8762-de3c-4c92-a9f5-25483b6e7922
        name:
          type: string
          description: The name of the role
          nullable: true
          example: LinkAdministrator
        description:
          type: string
          description: The description of the role
          nullable: true
          example: Administrator for the Link application
      additionalProperties: false
    ProblemDetails:
      type: object
      properties:
        type:
          type: string
          nullable: true
        title:
          type: string
          nullable: true
        status:
          type: integer
          format: int32
          nullable: true
        detail:
          type: string
          nullable: true
        instance:
          type: string
          nullable: true
      additionalProperties: {}
    SortOrder:
      enum:
      - 0
      - 1
      type: integer
      format: int32
    ValidationFailureResponse:
      type: object
      properties:
        errors:
          type: array
          items:
            type: string
          nullable: true
      additionalProperties: false

